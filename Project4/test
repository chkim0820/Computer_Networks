# Name: Chaehyeon Kim
# Case ID: Chaehyeon Kim
# Filename: test
# Date created: 10/30/2023
# Description: For testing proj4.cpp with samples given


#!/bin/bash
make

# 1) tcp1.trace; one TCP packet
echo "Testing tcp1.trace"
./proj4 -s -r tcp1.trace > s1.out
./proj4 -l -r tcp1.trace > l1.out
./proj4 -p -r tcp1.trace > p1.out
diff -u s1.out tcp1.s.out
diff -u l1.out tcp1.l.out
diff -u p1.out tcp1.p.out
echo

# 2) upd1.trace; one UDP packet
echo "Testing udp1.trace"
./proj4 -s -r udp1.trace > s2.out
./proj4 -l -r udp1.trace > l2.out
./proj4 -p -r udp1.trace > p2.out
diff -u s2.out udp1.s.out
diff -u l2.out udp1.l.out
diff -u p2.out udp1.p.out
echo

# 3) 10-pkts.trace; 10 packets
echo "Testing 10-pkts.trace"
./proj4 -s -r 10-pkts.trace > s3.out
./proj4 -l -r 10-pkts.trace > l3.out
./proj4 -p -r 10-pkts.trace > p3.out
diff -u s3.out 10-pkts.s.out
diff -u l3.out 10-pkts.l.out
diff -u p3.out 10-pkts.p.out
echo

# 4) icmp1.trace; One ICMP packet
echo "Testing icmp1.trace"
./proj4 -s -r icmp1.trace > s4.out
./proj4 -l -r icmp1.trace > l4.out
./proj4 -p -r icmp1.trace > p4.out
./proj4 -c -r icmp1.trace > c4.out
sort icmp1.c.out > icmp1.c.sort
sort c4.out > c4.sort
diff icmp1.c.sort c4.sort
diff -u s4.out icmp1.s.out
diff -u l4.out icmp1.l.out
diff -u p4.out icmp1.p.out
diff -u c4.out icmp1.c.out
echo

# 5) 1000-pkts.trace; 1000 packets
echo "Testing 1000-pkts.trace"
./proj4 -s -r 1000-pkts.trace > s5.out
./proj4 -l -r 1000-pkts.trace > l5.out
./proj4 -p -r 1000-pkts.trace > p5.out
diff -u s5.out 1000-pkts.s.out
diff -u l5.out 1000-pkts.l.out
diff -u p5.out 1000-pkts.p.out
echo

# 6) manyIPs.trace; a bunch of packets with a bunch of IP addresses
echo "Testing manyIPs.trace"
./proj4 -s -r manyIPs.trace > s6.out
diff -u s6.out manyIPs.trace.s.out
echo

# 7) crazy.trace; 35 packets with weird cases
echo "Testing crazy.trace"
./proj4 -s -r crazy.trace > s7.out
./proj4 -l -r crazy.trace > l7.out
./proj4 -p -r crazy.trace > p7.out
diff -u s7.out crazy.s.out
diff -u l7.out crazy.l.out
diff -u p7.out crazy.p.out
echo

# Extra credit; for 425 portion
echo "Testing extra credit portion"
./proj4 -s -r 425.trace > s425.out
./proj4 -l -r 425.trace > l425.out
./proj4 -p -r 425.trace > p425.out
echo